<h1>To-Do List</h1>

<!-- Filter Input -->
<div>
  <input
    type="text"
    placeholder="Filter by title"
    [(ngModel)]="filterText"
  />
</div>

<!-- Form for adding or editing a to-do -->
<form (ngSubmit)="editMode ? updateTodo() : addTodo()" #todoForm="ngForm">
  <input
    type="text"
    placeholder="Title"
    [(ngModel)]="newTitle"
    name="title"
    required
    minlength="3"
    #title="ngModel"
  />
  <div *ngIf="title.invalid && title.touched" class="error">
    <small *ngIf="title.errors?.required">Title is required.</small>
    <small *ngIf="title.errors?.minlength">Title must be at least 3 characters long.</small>
  </div>

  <textarea
    placeholder="Description"
    [(ngModel)]="newDescription"
    name="description"
    required
    minlength="5"
    #description="ngModel"
  ></textarea>
  <div *ngIf="description.invalid && description.touched" class="error">
    <small *ngIf="description.errors?.required">Description is required.</small>
    <small *ngIf="description.errors?.minlength">Description must be at least 5 characters long.</small>
  </div>

  <button type="submit" [disabled]="todoForm.invalid">
    {{ editMode ? 'Update' : 'Add' }}
  </button>
</form>

<!-- Display the list of todos -->
<ul>
  <li *ngFor="let todo of filteredTodos()">
    <h2>{{ todo.title }}</h2>
    <p>{{ todo.description }}</p>
    <p>Status: {{ todo.status }}</p>
    <button (click)="editTodo(todo)">Edit</button>
    <button (click)="updateStatus(todo.id, 'completed')">Mark as Completed</button>
    <button (click)="deleteTodo(todo.id)">Delete</button>
  </li>
</ul>
